"use client"

import type React from "react"
import { createContext, useContext, useState, useEffect } from "react"

type Language = "en" | "fr"

interface I18nContextType {
  language: Language
  setLanguage: (lang: Language) => void
  t: (key: string) => string
}

const translations = {
  en: {
    // Common
    "common.welcome": "Welcome",
    "common.search": "Search",
    "common.searching": "Searching...",
    "common.filter": "Filter",
    "common.save": "Save",
    "common.cancel": "Cancel",
    "common.delete": "Delete",
    "common.edit": "Edit",
    "common.view": "View",
    "common.loading": "Loading...",
    "common.error": "Error",
    "common.success": "Success",
    "common.confirm": "Confirm",
    "common.back": "Back",
    "common.next": "Next",
    "common.previous": "Previous",
    "common.submit": "Submit",
    "common.close": "Close",
    "common.open": "Open",
    "common.select": "Select",
    "common.upload": "Upload",
    "common.download": "Download",
    "common.share": "Share",
    "common.copy": "Copy",
    "common.paste": "Paste",
    "common.cut": "Cut",
    "common.undo": "Undo",
    "common.redo": "Redo",
    "common.refresh": "Refresh",
    "common.reload": "Reload",
    "common.reset": "Reset",
    "common.clear": "Clear",
    "common.apply": "Apply",
    "common.approve": "Approve",
    "common.reject": "Reject",
    "common.pending": "Pending",
    "common.completed": "Completed",
    "common.cancelled": "Cancelled",
    "common.active": "Active",
    "common.inactive": "Inactive",
    "common.verified": "Verified",
    "common.unverified": "Unverified",
    "common.call": "Call",
    "common.activeFilters": "Active filters",
    "common.servicesFound": "services found",
    "common.noServicesFound": "No services found",
    "common.noServicesMatch": "No services match",
    "common.noServicesMatchFilters": "No services match your current filters.",
    "common.tryAdjusting": "Try adjusting your search or filters.",
    "common.clearAllFilters": "Clear all filters",

    // Auth
    "auth.login": "Login",
    "auth.register": "Register",
    "auth.logout": "Logout",
    "auth.email": "Email",
    "auth.password": "Password",
    "auth.firstName": "First Name",
    "auth.lastName": "Last Name",
    "auth.phone": "Phone",
    "auth.role": "Role",
    "auth.client": "Client",
    "auth.provider": "Service Provider",
    "auth.admin": "Admin",
    "auth.signIn": "Sign In",
    "auth.signUp": "Sign Up",
    "auth.forgotPassword": "Forgot Password?",
    "auth.rememberMe": "Remember Me",
    "auth.createAccount": "Create Account",
    "auth.haveAccount": "Already have an account?",
    "auth.noAccount": "Don't have an account?",
    "auth.signInWith": "Sign in with",
    "auth.signUpWith": "Sign up with",
    "auth.google": "Google",
    "auth.facebook": "Facebook",
    "auth.orContinueWith": "Or continue with",
    "auth.enterEmail": "Enter your email",
    "auth.enterPassword": "Enter your password",
    "auth.createPassword": "Create a password",
    "auth.confirmPassword": "Confirm Password",
    "auth.selectRole": "Select your role",
    "auth.findServices": "Find services (Client)",
    "auth.offerServices": "Offer services (Provider)",
    "auth.signingIn": "Signing in...",
    "auth.creatingAccount": "Creating account...",
    "auth.welcomeBack": "Welcome back!",
    "auth.loginSuccess": "You have successfully logged in.",
    "auth.accountCreated": "Account created!",
    "auth.welcomeMessage": "Welcome to Houseman. Your account has been created successfully.",
    "auth.loginFailed": "Login failed",
    "auth.registrationFailed": "Registration failed",
    "auth.checkCredentials": "Please check your credentials and try again.",
    "auth.checkInformation": "Please check your information and try again.",

    // Navigation
    "nav.home": "Home",
    "nav.search": "Search",
    "nav.bookings": "Bookings",
    "nav.messages": "Messages",
    "nav.profile": "Profile",
    "nav.services": "Services",
    "nav.dashboard": "Dashboard",
    "nav.users": "Users",

    // Dashboard
    "dashboard.hello": "Hello",
    "dashboard.whatService": "What service do you need today?",
    "dashboard.welcomeBack": "Welcome back",
    "dashboard.manageServices": "Manage your services and bookings",
    "dashboard.serviceCategories": "Service Categories",
    "dashboard.featuredServices": "Featured Services",
    "dashboard.recentBookings": "Recent Bookings",
    "dashboard.noRecentBookings": "No recent bookings",
    "dashboard.bookService": "Book a Service",
    "dashboard.quickActions": "Quick Actions",
    "dashboard.addService": "Add Service",
    "dashboard.viewCalendar": "View Calendar",
    "dashboard.viewAll": "View All",
    "dashboard.thisMonth": "This Month",
    "dashboard.totalClients": "Total Clients",
    "dashboard.rating": "Rating",
    "dashboard.completed": "Completed",
    "dashboard.getVerified": "Get Verified",
    "dashboard.kycDescription": "Complete your KYC verification to get the blue tick and build trust with clients.",
    "dashboard.startVerification": "Start Verification",

    // Services
    "services.carpenter": "Carpenter",
    "services.electrician": "Electrician",
    "services.painter": "Painter",
    "services.barber": "Barber",
    "services.mechanic": "Mechanic",
    "services.cleaner": "Cleaner",
    "services.plumber": "Plumber",
    "services.gardener": "Gardener",
    "services.searchServices": "Search for services...",
    "services.filterBy": "Filter by",
    "services.category": "Category",
    "services.location": "Location",
    "services.priceRange": "Price Range",
    "services.rating": "Rating",
    "services.availability": "Availability",
    "services.sortBy": "Sort by",
    "services.relevance": "Relevance",
    "services.price": "Price",
    "services.price_low": "Price: Low to High",
    "services.price_high": "Price: High to Low",
    "services.distance": "Distance",
    "services.reviews": "Reviews",

    // Booking
    "booking.bookNow": "Book Now",
    "booking.selectDate": "Select Date",
    "booking.selectTime": "Select Time",
    "booking.address": "Address",
    "booking.notes": "Notes",
    "booking.totalPrice": "Total Price",
    "booking.confirmBooking": "Confirm Booking",
    "booking.bookingConfirmed": "Booking Confirmed",
    "booking.bookingDetails": "Booking Details",
    "booking.status": "Status",
    "booking.scheduledFor": "Scheduled for",
    "booking.serviceProvider": "Service Provider",
    "booking.client": "Client",
    "booking.service": "Service",
    "booking.price": "Price",
    "booking.date": "Date",
    "booking.time": "Time",
    "booking.accepted": "Accepted",
    "booking.inProgress": "In Progress",
    "booking.viewDetails": "View Details",
    "booking.contactProvider": "Contact Provider",
    "booking.cancelBooking": "Cancel Booking",
    "booking.reschedule": "Reschedule",

    // Profile
    "profile.myProfile": "My Profile",
    "profile.editProfile": "Edit Profile",
    "profile.personalInfo": "Personal Information",
    "profile.contactInfo": "Contact Information",
    "profile.preferences": "Preferences",
    "profile.settings": "Settings",
    "profile.language": "Language",
    "profile.theme": "Theme",
    "profile.notifications": "Notifications",
    "profile.privacy": "Privacy",
    "profile.security": "Security",
    "profile.help": "Help",
    "profile.about": "About",
    "profile.version": "Version",
    "profile.lightMode": "Light Mode",
    "profile.darkMode": "Dark Mode",
    "profile.systemMode": "System Mode",
    "profile.english": "English",
    "profile.french": "French",
    "profile.changePassword": "Change Password",
    "profile.deleteAccount": "Delete Account",
    "profile.signOut": "Sign Out",

    // Chat
    "chat.typeMessage": "Type a message...",
    "chat.send": "Send",
    "chat.online": "Online",
    "chat.offline": "Offline",
    "chat.lastSeen": "Last seen",
    "chat.typing": "Typing...",
    "chat.delivered": "Delivered",
    "chat.read": "Read",
    "chat.today": "Today",
    "chat.yesterday": "Yesterday",
    "chat.reply": "Reply",
    "chat.platformGuideline": "Keep all communication within Houseman for your security",

    // Call
    "call.platformGuideline": "Keep all communication within Houseman for your security",

    // Currency
    "currency.xaf": "XAF",
    "currency.from": "From",
    "currency.to": "To",
    "currency.startingAt": "Starting at",
  },
  fr: {
    // Common
    "common.welcome": "Bienvenue",
    "common.search": "Rechercher",
    "common.searching": "Recherche...",
    "common.filter": "Filtrer",
    "common.save": "Enregistrer",
    "common.cancel": "Annuler",
    "common.delete": "Supprimer",
    "common.edit": "Modifier",
    "common.view": "Voir",
    "common.loading": "Chargement...",
    "common.error": "Erreur",
    "common.success": "Succès",
    "common.confirm": "Confirmer",
    "common.back": "Retour",
    "common.next": "Suivant",
    "common.previous": "Précédent",
    "common.submit": "Soumettre",
    "common.close": "Fermer",
    "common.open": "Ouvrir",
    "common.select": "Sélectionner",
    "common.upload": "Télécharger",
    "common.download": "Télécharger",
    "common.share": "Partager",
    "common.copy": "Copier",
    "common.paste": "Coller",
    "common.cut": "Couper",
    "common.undo": "Annuler",
    "common.redo": "Refaire",
    "common.refresh": "Actualiser",
    "common.reload": "Recharger",
    "common.reset": "Réinitialiser",
    "common.clear": "Effacer",
    "common.apply": "Appliquer",
    "common.approve": "Approuver",
    "common.reject": "Rejeter",
    "common.pending": "En attente",
    "common.completed": "Terminé",
    "common.cancelled": "Annulé",
    "common.active": "Actif",
    "common.inactive": "Inactif",
    "common.verified": "Vérifié",
    "common.unverified": "Non vérifié",
    "common.call": "Appeler",
    "common.activeFilters": "Filtres actifs",
    "common.servicesFound": "services trouvés",
    "common.noServicesFound": "Aucun service trouvé",
    "common.noServicesMatch": "Aucun service ne correspond",
    "common.noServicesMatchFilters": "Aucun service ne correspond à vos filtres actuels.",
    "common.tryAdjusting": "Essayez d'ajuster votre recherche ou vos filtres.",
    "common.clearAllFilters": "Effacer tous les filtres",

    // Auth
    "auth.login": "Connexion",
    "auth.register": "S'inscrire",
    "auth.logout": "Déconnexion",
    "auth.email": "Email",
    "auth.password": "Mot de passe",
    "auth.firstName": "Prénom",
    "auth.lastName": "Nom",
    "auth.phone": "Téléphone",
    "auth.role": "Rôle",
    "auth.client": "Client",
    "auth.provider": "Prestataire",
    "auth.admin": "Administrateur",
    "auth.signIn": "Se connecter",
    "auth.signUp": "S'inscrire",
    "auth.forgotPassword": "Mot de passe oublié?",
    "auth.rememberMe": "Se souvenir de moi",
    "auth.createAccount": "Créer un compte",
    "auth.haveAccount": "Vous avez déjà un compte?",
    "auth.noAccount": "Vous n'avez pas de compte?",
    "auth.signInWith": "Se connecter avec",
    "auth.signUpWith": "S'inscrire avec",
    "auth.google": "Google",
    "auth.facebook": "Facebook",
    "auth.orContinueWith": "Ou continuer avec",
    "auth.enterEmail": "Entrez votre email",
    "auth.enterPassword": "Entrez votre mot de passe",
    "auth.createPassword": "Créer un mot de passe",
    "auth.confirmPassword": "Confirmer le mot de passe",
    "auth.selectRole": "Sélectionnez votre rôle",
    "auth.findServices": "Trouver des services (Client)",
    "auth.offerServices": "Offrir des services (Prestataire)",
    "auth.signingIn": "Connexion en cours...",
    "auth.creatingAccount": "Création du compte...",
    "auth.welcomeBack": "Bon retour!",
    "auth.loginSuccess": "Vous vous êtes connecté avec succès.",
    "auth.accountCreated": "Compte créé!",
    "auth.welcomeMessage": "Bienvenue sur Houseman. Votre compte a été créé avec succès.",
    "auth.loginFailed": "Échec de la connexion",
    "auth.registrationFailed": "Échec de l'inscription",
    "auth.checkCredentials": "Veuillez vérifier vos identifiants et réessayer.",
    "auth.checkInformation": "Veuillez vérifier vos informations et réessayer.",

    // Navigation
    "nav.home": "Accueil",
    "nav.search": "Recherche",
    "nav.bookings": "Réservations",
    "nav.messages": "Messages",
    "nav.profile": "Profil",
    "nav.services": "Services",
    "nav.dashboard": "Tableau de bord",
    "nav.users": "Utilisateurs",

    // Dashboard
    "dashboard.hello": "Bonjour",
    "dashboard.whatService": "De quel service avez-vous besoin aujourd'hui?",
    "dashboard.welcomeBack": "Bon retour",
    "dashboard.manageServices": "Gérez vos services et réservations",
    "dashboard.serviceCategories": "Catégories de services",
    "dashboard.featuredServices": "Services en vedette",
    "dashboard.recentBookings": "Réservations récentes",
    "dashboard.noRecentBookings": "Aucune réservation récente",
    "dashboard.bookService": "Réserver un service",
    "dashboard.quickActions": "Actions rapides",
    "dashboard.addService": "Ajouter un service",
    "dashboard.viewCalendar": "Voir le calendrier",
    "dashboard.viewAll": "Voir tout",
    "dashboard.thisMonth": "Ce mois-ci",
    "dashboard.totalClients": "Total des clients",
    "dashboard.rating": "Note",
    "dashboard.completed": "Terminé",
    "dashboard.getVerified": "Se faire vérifier",
    "dashboard.kycDescription":
      "Complétez votre vérification KYC pour obtenir la coche bleue et gagner la confiance des clients.",
    "dashboard.startVerification": "Commencer la vérification",

    // Services
    "services.carpenter": "Menuisier",
    "services.electrician": "Électricien",
    "services.painter": "Peintre",
    "services.barber": "Coiffeur",
    "services.mechanic": "Mécanicien",
    "services.cleaner": "Agent de nettoyage",
    "services.plumber": "Plombier",
    "services.gardener": "Jardinier",
    "services.searchServices": "Rechercher des services...",
    "services.filterBy": "Filtrer par",
    "services.category": "Catégorie",
    "services.location": "Localisation",
    "services.priceRange": "Gamme de prix",
    "services.rating": "Note",
    "services.availability": "Disponibilité",
    "services.sortBy": "Trier par",
    "services.relevance": "Pertinence",
    "services.price": "Prix",
    "services.price_low": "Prix: Croissant",
    "services.price_high": "Prix: Décroissant",
    "services.distance": "Distance",
    "services.reviews": "Avis",

    // Booking
    "booking.bookNow": "Réserver maintenant",
    "booking.selectDate": "Sélectionner la date",
    "booking.selectTime": "Sélectionner l'heure",
    "booking.address": "Adresse",
    "booking.notes": "Notes",
    "booking.totalPrice": "Prix total",
    "booking.confirmBooking": "Confirmer la réservation",
    "booking.bookingConfirmed": "Réservation confirmée",
    "booking.bookingDetails": "Détails de la réservation",
    "booking.status": "Statut",
    "booking.scheduledFor": "Programmé pour",
    "booking.serviceProvider": "Prestataire de services",
    "booking.client": "Client",
    "booking.service": "Service",
    "booking.price": "Prix",
    "booking.date": "Date",
    "booking.time": "Heure",
    "booking.accepted": "Accepté",
    "booking.inProgress": "En cours",
    "booking.viewDetails": "Voir les détails",
    "booking.contactProvider": "Contacter le prestataire",
    "booking.cancelBooking": "Annuler la réservation",
    "booking.reschedule": "Reprogrammer",

    // Profile
    "profile.myProfile": "Mon profil",
    "profile.editProfile": "Modifier le profil",
    "profile.personalInfo": "Informations personnelles",
    "profile.contactInfo": "Informations de contact",
    "profile.preferences": "Préférences",
    "profile.settings": "Paramètres",
    "profile.language": "Langue",
    "profile.theme": "Thème",
    "profile.notifications": "Notifications",
    "profile.privacy": "Confidentialité",
    "profile.security": "Sécurité",
    "profile.help": "Aide",
    "profile.about": "À propos",
    "profile.version": "Version",
    "profile.lightMode": "Mode clair",
    "profile.darkMode": "Mode sombre",
    "profile.systemMode": "Mode système",
    "profile.english": "Anglais",
    "profile.french": "Français",
    "profile.changePassword": "Changer le mot de passe",
    "profile.deleteAccount": "Supprimer le compte",
    "profile.signOut": "Se déconnecter",

    // Chat
    "chat.typeMessage": "Tapez un message...",
    "chat.send": "Envoyer",
    "chat.online": "En ligne",
    "chat.offline": "Hors ligne",
    "chat.lastSeen": "Vu pour la dernière fois",
    "chat.typing": "En train d'écrire...",
    "chat.delivered": "Livré",
    "chat.read": "Lu",
    "chat.today": "Aujourd'hui",
    "chat.yesterday": "Hier",
    "chat.reply": "Répondre",
    "chat.platformGuideline": "Gardez toute communication dans Houseman pour votre sécurité",

    // Call
    "call.platformGuideline": "Gardez toute communication dans Houseman pour votre sécurité",

    // Currency
    "currency.xaf": "XAF",
    "currency.from": "À partir de",
    "currency.to": "À",
    "currency.startingAt": "À partir de",
  },
}

const I18nContext = createContext<I18nContextType | undefined>(undefined)

export function I18nProvider({ children }: { children: React.ReactNode }) {
  const [language, setLanguage] = useState<Language>("en")

  useEffect(() => {
    // Load saved language preference
    const savedLanguage = localStorage.getItem("houseman_language") as Language
    if (savedLanguage && (savedLanguage === "en" || savedLanguage === "fr")) {
      setLanguage(savedLanguage)
    } else {
      // Detect browser language
      const browserLang = navigator.language.toLowerCase()
      if (browserLang.startsWith("fr")) {
        setLanguage("fr")
      } else {
        setLanguage("en")
      }
    }
  }, [])

  const handleSetLanguage = (lang: Language) => {
    setLanguage(lang)
    localStorage.setItem("houseman_language", lang)
  }

  const t = (key: string): string => {
    const translation = translations[language][key as keyof (typeof translations)[typeof language]]
    return translation || key
  }

  return <I18nContext.Provider value={{ language, setLanguage: handleSetLanguage, t }}>{children}</I18nContext.Provider>
}

export function useI18n() {
  const context = useContext(I18nContext)
  if (context === undefined) {
    throw new Error("useI18n must be used within an I18nProvider")
  }
  return context
}
